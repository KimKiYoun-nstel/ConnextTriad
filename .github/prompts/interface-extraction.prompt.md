---
mode: 'agent'
description: '인터페이스 추출(DIP) 및 의존 역전 설계'
---
대상: 구상 클래스에 의존하는 호출처.

입력:
- 선택 코드: ${selection}
- 후보 클래스/컴포넌트: ${input:targets:'인터페이스로 추출할 대상 이름(쉼표로 구분)'}
- 제약: ${input:constraints:'ABI 유지, 성능, 예외 정책 등 (선택)'}

작업:
1) 인터페이스로 노출할 최소 집합 도출
2) 팩토리/DI(생성자 주입/함수 주입) 경로 설계
3) 테스트 더블(Fake/Stub/Mock) 삽입 지점
4) 마이그레이션 단계별 플랜(컴파일 통과 가능한 원자적 스텝)

출력:
- 인터페이스 헤더 스케치, 구현 클래스 적응 코드, 등록/팩토리 코드
- 호출자 변경 diff 예시와 리스크/롤백 포인트
